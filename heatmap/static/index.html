<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Rust and WebAssembly with d3 to create Heatmaps</title>
    <script src="https://d3js.org/d3.v6.js"></script>
    <style src="style.css"></style>
    <style>
        .panzoom {
            -webkit-backface-visibility: initial !important;
            -webkit-transform-origin: 50% 50%;
        }
    </style>
</head>

<body>
    <h1>Rust, Wasm & d3.js Heatmap</h1>
    <canvas id="heatmap" class="panzoom"></canvas>

    <script type="module">
        import init, { start } from '/pkg/microBioRust_heatmap.js';

        async function run() {
            try {
                await init();
                const heatmap_js_value = await start();
                console.log("Heatmap data:", heatmap_js_value);
            } catch (error) {
                console.error("An error occurred:", error.message || error);
                console.error("Error stack:", error.stack);
            }
        }
        run();
    </script>
</body>

</html>
